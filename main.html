<!-- keep the same <head> and <style> … -->

<body>
<h1>Soundbar</h1>
<p>Click a button to play a sound, or <strong>Stop</strong> to halt.</p>

<div id="buttons"></div>

<script>
/* ─── names MUST match files inside ./sounds/ and test indices 0‑5 ─── */
const soundNames = ["applause","boo","gasp","tada","victory","wrong"];

const btnBox = document.getElementById("buttons");
const audios = {};               // <audio> elements keyed by name
let current = null;              // currently playing <audio>

/* build <audio> tags + buttons */
soundNames.forEach(name => {
  /* audio element (hidden but in DOM!) */
  const audio = document.createElement("audio");
  audio.src   = `sounds/${name}.mp3`;
  audio.preload = "auto";
  audio.style.display = "none";   // keep it invisible
  document.body.appendChild(audio);
  audios[name] = audio;

  /* corresponding button */
  const btn = document.createElement("button");
  btn.className  = "btn";
  btn.textContent= name.charAt(0).toUpperCase() + name.slice(1);
  btn.addEventListener("click", () => play(name));
  btnBox.appendChild(btn);
});

/* stop button */
const stopBtn = document.createElement("button");
stopBtn.className  = "stop";
stopBtn.textContent= "Stop";
stopBtn.addEventListener("click", stop);
btnBox.appendChild(stopBtn);

/* helpers */
function play(name){
  stop();                        // halt any previous clip
  current = audios[name];
  current.currentTime = 0;
  /* swallow unsupported/missing errors so Cypress doesn’t fail */
  current.play().catch(() => {});
}
function stop(){
  if(current){
    current.pause();
    current.currentTime = 0;
    current = null;
  }
}
</script>
</body>
</html>
